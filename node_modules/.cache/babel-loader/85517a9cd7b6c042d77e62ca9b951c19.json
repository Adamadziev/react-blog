{"ast":null,"code":"import _slicedToArray from \"/home/adamadziev/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/React blog mokapi v2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/adamadziev/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/React blog mokapi v2/src/pages/Home/index.jsx\";\n\nimport React from \"react\";\nimport axios from \"axios\";\nimport Header from \"../../components/Header\";\nimport Post from \"../../components/Post\";\nimport Pagination from \"../../components/Pagination\";\nimport styles from \"./Home.module.css\";\n\nvar Home = function Home() {\n  var _React$useState = React.useState([]),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      posts = _React$useState2[0],\n      setPosts = _React$useState2[1];\n\n  var _React$useState3 = React.useState(0),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      postsCount = _React$useState4[0],\n      setPostsCount = _React$useState4[1];\n\n  var _React$useState5 = React.useState(\"\"),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      searchValue = _React$useState6[0],\n      setSearchValue = _React$useState6[1];\n\n  var _React$useState7 = React.useState(2),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      currentPage = _React$useState8[0],\n      setCurrentPage = _React$useState8[1];\n\n  var limitPostsOnPage = 6;\n  React.useEffect(function () {\n    axios // Для того чтобы вычислить общее кол-во постов (для пагинации)\n    .get(\"https://62c1dce62af60be89ecefccf.mockapi.io/react-blog-mockapi_posts\").then(function (_ref) {\n      var data = _ref.data;\n      setPostsCount(data.length);\n    });\n\n    if (searchValue) {\n      axios.get(\"https://62c1dce62af60be89ecefccf.mockapi.io/react-blog-mockapi_posts?limit=\".concat(limitPostsOnPage)).then(function (_ref2) {\n        var data = _ref2.data;\n        setPostsCount(data.length);\n        setPosts(data);\n      });\n    } else {\n      axios.get(\"https://62c1dce62af60be89ecefccf.mockapi.io/react-blog-mockapi_posts?page=\".concat(currentPage, \"&limit=\").concat(limitPostsOnPage)).then(function (_ref3) {\n        var data = _ref3.data;\n        setPosts(data);\n      });\n    }\n  }, [currentPage, searchValue]);\n  var postItems = posts.filter(function (post) {\n    return post.title.toLocaleLowerCase().includes(searchValue.toLocaleLowerCase());\n  }).map(function (post) {\n    return /*#__PURE__*/React.createElement(Post, {\n      key: post.id,\n      id: post.id,\n      title: post.title,\n      category: post.subCategory,\n      img: post.img,\n      description: post.description,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 7\n      }\n    });\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, {\n    searchValue: searchValue,\n    setSearchValue: setSearchValue,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.root,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }, postItems, searchValue && !postItems.length && /*#__PURE__*/React.createElement(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, \"\\u041F\\u043E \\u0432\\u0430\\u0448\\u0435\\u043C\\u0443 \\u0437\\u0430\\u043F\\u0440\\u043E\\u0441\\u0443 \\u043D\\u0438\\u0447\\u0435\\u0433\\u043E \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E\")), !searchValue && /*#__PURE__*/React.createElement(Pagination, {\n    changePage: function changePage(num) {\n      setCurrentPage(num);\n    },\n    pageCount: Math.ceil(postsCount / limitPostsOnPage) // Кол-во страниц\n    ,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }));\n};\n\nexport default Home;","map":{"version":3,"names":["React","axios","Header","Post","Pagination","styles","Home","useState","posts","setPosts","postsCount","setPostsCount","searchValue","setSearchValue","currentPage","setCurrentPage","limitPostsOnPage","useEffect","get","then","data","length","postItems","filter","post","title","toLocaleLowerCase","includes","map","id","subCategory","img","description","root","num","Math","ceil"],"sources":["/home/adamadziev/Рабочий стол/React blog mokapi v2/src/pages/Home/index.jsx"],"sourcesContent":["import React from \"react\";\r\nimport axios from \"axios\";\r\n\r\nimport Header from \"../../components/Header\";\r\nimport Post from \"../../components/Post\";\r\nimport Pagination from \"../../components/Pagination\";\r\n\r\nimport styles from \"./Home.module.css\";\r\n\r\nconst Home = () => {\r\n  const [posts, setPosts] = React.useState([]);\r\n  const [postsCount, setPostsCount] = React.useState(0);\r\n  const [searchValue, setSearchValue] = React.useState(\"\");\r\n\r\n  const [currentPage, setCurrentPage] = React.useState(2);\r\n  const limitPostsOnPage = 6;\r\n\r\n  React.useEffect(() => {\r\n    axios // Для того чтобы вычислить общее кол-во постов (для пагинации)\r\n      .get(\r\n        \"https://62c1dce62af60be89ecefccf.mockapi.io/react-blog-mockapi_posts\"\r\n      )\r\n      .then(({ data }) => {\r\n        setPostsCount(data.length);\r\n      });\r\n\r\n    if (searchValue) {\r\n      axios\r\n        .get(\r\n          `https://62c1dce62af60be89ecefccf.mockapi.io/react-blog-mockapi_posts?limit=${limitPostsOnPage}`\r\n        )\r\n        .then(({ data }) => {\r\n          setPostsCount(data.length);\r\n          setPosts(data);\r\n        });\r\n    } else {\r\n      axios\r\n        .get(\r\n          `https://62c1dce62af60be89ecefccf.mockapi.io/react-blog-mockapi_posts?page=${currentPage}&limit=${limitPostsOnPage}`\r\n        )\r\n        .then(({ data }) => {\r\n          setPosts(data);\r\n        });\r\n    }\r\n  }, [currentPage, searchValue]);\r\n\r\n  const postItems = posts\r\n    .filter((post) =>\r\n      post.title.toLocaleLowerCase().includes(searchValue.toLocaleLowerCase())\r\n    )\r\n    .map((post) => (\r\n      <Post\r\n        key={post.id}\r\n        id={post.id}\r\n        title={post.title}\r\n        category={post.subCategory}\r\n        img={post.img}\r\n        description={post.description}\r\n      />\r\n    ));\r\n\r\n  return (\r\n    <>\r\n      <Header searchValue={searchValue} setSearchValue={setSearchValue} />\r\n      <div className={styles.root}>\r\n        {postItems}\r\n        {searchValue && !postItems.length && (\r\n          <h3>По вашему запросу ничего не найдено</h3>\r\n        )}\r\n      </div>\r\n      {!searchValue && (\r\n        <Pagination\r\n          changePage={(num) => {\r\n            setCurrentPage(num);\r\n          }}\r\n          pageCount={Math.ceil(postsCount / limitPostsOnPage)} // Кол-во страниц\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}